<div class="max-w-7xl mx-auto px-4 py-8">
  <h1 class="text-3xl font-bold text-gray-800 mb-8"><%= @restaurant.name %> Dashboard</h1>

  <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
    <!-- Active Orders Section -->
    <section class="bg-white shadow-md rounded-lg p-6">
      <h2 class="text-2xl font-semibold text-gray-800 mb-4">Active Orders</h2>
      <div class="space-y-4">
        <% @active_orders.each do |order| %>
          <div class="border-b border-gray-200 pb-4">
            <%= link_to order_path(order), class: 'block p-4 bg-white rounded-lg transition duration-300 ease-in-out transform hover:bg-gray-100 hover:shadow-lg hover:scale-105 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2' do %>
              <div class="flex justify-between items-center mb-2">
                <h3 class="text-lg font-medium text-gray-800">Order #<%= order.id %></h3>
                <span class="px-2 py-1 rounded-full text-sm <%= order_status_color(order.status) %>">
                  <%= order.status.capitalize %>
                </span>
              </div>
              <p class="text-gray-800 font-semibold">Total: <%= number_to_currency(order.total_price) %></p>
            <% end %>
          </div>
        <% end %>
      </div>
    </section>

    <!-- Analytics Section -->
    <section class="bg-white shadow-md rounded-lg p-6">
      <h2 class="text-2xl font-semibold text-gray-800 mb-4">Analytics</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div>
          <h3 class="text-lg font-medium text-gray-800 mb-2">Orders</h3>
          <p class="text-gray-600">Daily Orders: <%= @daily_orders %></p>
          <h4 class="text-md font-medium text-gray-800 mt-4 mb-2">Order Status Distribution</h4>
          <% @order_status_distribution.each do |status, count| %>
              <p class="text-gray-600"><%= status.capitalize %>: <%= count %></p>
          <% end %>
        </div>
        <div>
          <h3 class="text-lg font-medium text-gray-800 mb-2">Revenue</h3>
          <p class="text-gray-600">Total Revenue: <%= number_to_currency(@total_revenue) %></p>
          <p class="text-gray-600">Average Order Value: <%= number_to_currency(@average_order_value) %></p>
        </div>
      </div>
    </section>

    <!-- Menu Section -->
    <section class="bg-white shadow-md rounded-lg p-6 lg:col-span-2">
      <h2 class="text-2xl font-semibold text-gray-800 mb-4">Menu</h2>
      <div class="mb-4">
        <h3 class="text-lg font-medium text-gray-800 mb-2">Menu Item Availability</h3>
        <p class="text-gray-600">Available: <%= @menu_item_availability['available'] || 0 %></p>
        <p class="text-gray-600">Out of Stock: <%= @menu_item_availability['out_of_stock'] || 0 %></p>
      </div>
      <h3 class="text-lg font-medium text-gray-800 mb-2">All Menu Items</h3>
      
        <div id="menu_items" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
          <%= render @menu_items %>
        </div>
      <%= turbo_frame_tag "new_menu_item" do %>
        <div class="mt-4">
          <%= link_to "Add New Menu Item", new_dashboard_menu_item_path(@restaurant), class: "btn bg-green-500 hover:bg-green-600 text-white" %>
        </div>
      <% end %>
    </section>
  </div>

  <div class="mt-8 space-x-4">
    <%= turbo_frame_tag "edit_restaurant" do %>
      <%= link_to "Edit Restaurant", edit_restaurant_path(@restaurant), class: "btn" %>
    <% end %>
    <%= link_to "Delete Restaurant", restaurant_path(@restaurant), data: { turbo_method: :delete, turbo_confirm: "Are you sure?" }, class: "btn bg-red-500 hover:bg-red-600 text-white" %>
  </div>
</div>